/* Mobile-specific overrides for Home layout */

@media screen and (max-width: 768px) {
  /* 1. Target the direct wrapper for our sections */
  .anvil-container-overflow {
    position: relative !important;
  }
  
  /* 2. Force each section to be stacked blocks with explicit display order */
  /* AGENTS - first position */
  .anvil-container[anvil-container-name="sec_agents"] {
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    z-index: 4 !important;
    margin-bottom: 20px !important;
  }
  
  /* NEXT - second position */
  .anvil-container[anvil-container-name="sec_next"] {
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    z-index: 3 !important;
    margin-bottom: 20px !important;
  }
  
  /* HOT - third position */
  .anvil-container[anvil-container-name="sec_hot"] {
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    z-index: 2 !important;
    margin-bottom: 20px !important;
  }
  
  /* SHORTS - fourth position */
  .anvil-container[anvil-container-name="sec_shorts"] {
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    z-index: 1 !important;
    margin-bottom: 20px !important;
  }
  
  /* 3. Parent container fix - make sure all sections are in their own stacking context */
  .anvil-panel-section, 
  .anvil-panel-section-container {
    overflow: visible !important;
    position: static !important;
    width: 100% !important;
    display: block !important;
  }
  
  /* 4. Force all row and column elements to full width blocks */
  .anvil-panel-row,
  .anvil-panel-col,
  .wrap-mobile,
  div[class*="anvil-panel-col-"] {
    display: block !important;
    width: 100% !important;
    float: none !important;
    position: static !important;
  }
  
  /* 5. Try a !important transform approach to force browser reflow */
  .anvil-container[anvil-container-name="sec_agents"] {
    transform: translateY(0px) !important;
  }
  
  .anvil-container[anvil-container-name="sec_next"] {
    transform: translateY(0px) !important;
  }
  
  .anvil-container[anvil-container-name="sec_hot"] {
    transform: translateY(0px) !important;
  }
  
  .anvil-container[anvil-container-name="sec_shorts"] {
    transform: translateY(0px) !important;
  }
  
  /* 6. Force any flex containers to column orientation */
  div[style*="display: flex"],
  div[style*="display:flex"] {
    flex-direction: column !important;
  }
  
  /* 7. Reset any fixed height/width constraints */
  .anvil-panel-section-container[style*="height"],
  .anvil-panel-section-container[style*="width"] {
    height: auto !important;
    width: 100% !important;
  }
  
  /* 8. Target the row with the parent of the side-by-side panels */
  body .row > div:has(> .anvil-container[anvil-container-name="sec_agents"]),
  body .row > div:has(> .anvil-container[anvil-container-name="sec_shorts"]) {
    width: 100% !important;
    float: none !important;
    display: block !important;
  }
}
